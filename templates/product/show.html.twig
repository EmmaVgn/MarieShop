{% extends "base.html.twig" %}

{% block title %}
	Page de :
	{{ product.name }}
{% endblock %}

{% block body %}
	<h1>{{ product.name }}
		({{ product.price | amount }})</h1>
	<div class="row">
		<div class="row">
			<div class="col-lg-8 mb-md-3 mb-sm-3">
				<div id="carouselSingleVehiculeIndicators" class="carousel slide carousel-fade">
					<div class="carousel-inner">
						{% for image in product.images %}
							<div class="carousel-item {% if loop.first %}active{% endif %}">
								<img src="{{ vich_uploader_asset(image, 'imageFile') }}" alt="{{ product.name }}" class="img-fluid">
							</div>
						{% endfor %}
					</div>
					<button class="carousel-control-prev" type="button" data-bs-target="#carouselSingleVehiculeIndicators" data-bs-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="visually-hidden">Previous</span>
					</button>
					<button class="carousel-control-next" type="button" data-bs-target="#carouselSingleVehiculeIndicators" data-bs-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="visually-hidden">Next</span>
					</button>
				</div>
				<div class="accordion mt-8" id="accordionExample">
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
								Description détaillée
							</button>
						</h2>
						<div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
							<div class="accordion-body">
								<strong>{{ product.name }}
								</strong>
								{{ product.description }}


							</div>
						</div>
					</div>
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
								Indications techniques
							</button>
						</h2>
						<div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
							<div class="accordion-body">
								<strong>Nom botanique:
								</strong>
								{{ product.boticalName }}
								<br>
								<strong>
									Partie de la plante:
								</strong>
								{{ product.partofplant }}
								<br>
								<strong>Méthode d'extraction:</strong>
								{{ product.extractionMethod }}
								<br>
								<strong>Culture de
									{{ product.name }}:
								</strong>
								{{ product.culture }}
								<br>
								<strong>Contenance:
								</strong>
								{{ product.capacity }}
								ml
								<br>
								<strong>Date Maximum de Durabilité:
								</strong>
								{{ product.MDD | date('Y') }}
							</div>
						</div>
					</div>
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
								Mode d'utilisation et précautions
							</button>
						</h2>
						<div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
							<div class="accordion-body">
								<strong>Conseils d'utilisation:</strong>
								{{ product.advise }}

								<br>
								<strong>Précautions</strong>
								{{ product.precautions }}
							</div>
						</div>
					</div>
				</div>


			</div>
			<div class="col-md-4">
				<div class="">
					<div class="card-body profile-card pt-4 d-flex flex-column align-items-center">
						<h3 class="text-center">{{ product.name }}</h3>
						<div class="features mt-2 d-flex">
							<strong>Contenance:
							</strong>
							{{ product.capacity }}
							ml
							<br>


						</div>
					</div>
					<form id="addToCartForm" action="{{ path('cart_add', { id: product.id }) }}" method="get">
						<input type="hidden" name="id" value="{{ product.id }}">
						<div class="quantity-selector d-flex align-items-center mt-3">
							<button type="button" class="btn btn-outline-secondary" id="decrementBtn">-</button>
							<input type="number" id="quantityInput" name="quantity" value="1" min="1" max="{{ product.stock }}" class="form-control mx-2" style="width: 60px;">
							<button type="button" class="btn btn-outline-secondary" id="incrementBtn">+</button>
						</div>
						<div class="mt-3">
							{% if product.stock > 0 %}
								<button type="submit" class="btn btn-success">Ajouter au panier</button>
							{% else %}
								<p class="text-danger">Temporairement en rupture de stock</p>
							{% endif %}
						</div>
					</form>


				</div>
				<div class="card-body profile-card pt-4 d-flex flex-column align-items-center">

					<p>
						{{ product.introduction }}
					</p>

				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	<script src=" {{ asset('assets/js/shop.js') }}" defer></script>
	<script src="{{ asset('assets/js/bootstrap.bundle.min.js') }}"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock %}
